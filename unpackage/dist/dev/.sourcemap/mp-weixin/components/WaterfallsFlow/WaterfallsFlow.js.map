{"version":3,"sources":["webpack:///D:/MyCode/前端代码/移动端/todo/components/WaterfallsFlow/WaterfallsFlow.vue?d3e8","webpack:///D:/MyCode/前端代码/移动端/todo/components/WaterfallsFlow/WaterfallsFlow.vue?a3ea","webpack:///D:/MyCode/前端代码/移动端/todo/components/WaterfallsFlow/WaterfallsFlow.vue?fc6f","webpack:///D:/MyCode/前端代码/移动端/todo/components/WaterfallsFlow/WaterfallsFlow.vue?7e8f","uni-app:///components/WaterfallsFlow/WaterfallsFlow.vue","webpack:///D:/MyCode/前端代码/移动端/todo/components/WaterfallsFlow/WaterfallsFlow.vue?1f62","webpack:///D:/MyCode/前端代码/移动端/todo/components/WaterfallsFlow/WaterfallsFlow.vue?4732"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAuI;AACvI;AACkE;AACL;AACsC;;;AAGnG;AACkM;AAClM,gBAAgB,sMAAU;AAC1B,EAAE,oFAAM;AACR,EAAE,qGAAM;AACR,EAAE,8GAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,yGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,oPAEN;AACP;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACjCA;AAAA;AAAA;AAAA;AAAswB,CAAgB,qvBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC4B1xB;AACA;AACA,0CADA,EADA;;AAIA;AACA;AACA;AACA,iBADA;AAEA,mBAFA,EAFA;;AAMA;AACA,kBADA;AAEA,iBAFA,EANA,EAJA;;;AAeA,MAfA,kBAeA;AACA;AACA,iBADA,EACA;AACA,kBAFA,EAEA;AACA,mBAHA,EAGA;AACA,aAJA,EAIA;AACA,mBALA,CAKA;AALA;AAOA,GAvBA;AAwBA;AACA;AACA,UAFA,oBAEA;AACA;AACA;AACA,wFADA,EACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAlBA;;AAoBA;AACA,QArBA,kBAqBA;AACA;AACA;AACA;AACA;AACA,KA1BA,EAxBA;;AAoDA;AACA;AACA,aAFA,uBAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OALA,MAKA;AACA;AACA;AACA;AACA;AACA,OALA,MAKA;AACA;AACA;AACA;AACA;AACA,SAFA,MAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAzBA;AA0BA;AACA,iBA3BA,yBA2BA,WA3BA,EA2BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAHA,EAGA,IAHA;AAIA,OALA;AAMA,KArCA;;AAuCA;AACA,WAxCA,mBAwCA,IAxCA,EAwCA;AACA;AACA,KA1CA,EApDA,E;;;;;;;;;;;;;AC5BA;AAAA;AAAA;AAAA;AAAq8C,CAAgB,g2CAAG,EAAC,C;;;;;;;;;;;ACAz9C;AACA,OAAO,KAAU,EAAE,kBAKd","file":"components/WaterfallsFlow/WaterfallsFlow.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./WaterfallsFlow.vue?vue&type=template&id=26d87764&scoped=true&\"\nvar renderjs\nimport script from \"./WaterfallsFlow.vue?vue&type=script&lang=js&\"\nexport * from \"./WaterfallsFlow.vue?vue&type=script&lang=js&\"\nimport style0 from \"./WaterfallsFlow.vue?vue&type=style&index=0&id=26d87764&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../LenovoQMDownload/SoftMgr/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"26d87764\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/WaterfallsFlow/WaterfallsFlow.vue\"\nexport default component.exports","export * from \"-!../../../../../../LenovoQMDownload/SoftMgr/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../LenovoQMDownload/SoftMgr/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../LenovoQMDownload/SoftMgr/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../LenovoQMDownload/SoftMgr/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../LenovoQMDownload/SoftMgr/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../LenovoQMDownload/SoftMgr/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./WaterfallsFlow.vue?vue&type=template&id=26d87764&scoped=true&\"","var components\ntry {\n  components = {\n    WaterfallsFlowItem: function() {\n      return import(\n        /* webpackChunkName: \"components/WaterfallsFlowItem/WaterfallsFlowItem\" */ \"@/components/WaterfallsFlowItem/WaterfallsFlowItem.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../LenovoQMDownload/SoftMgr/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../LenovoQMDownload/SoftMgr/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../LenovoQMDownload/SoftMgr/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../LenovoQMDownload/SoftMgr/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../LenovoQMDownload/SoftMgr/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./WaterfallsFlow.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../LenovoQMDownload/SoftMgr/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../LenovoQMDownload/SoftMgr/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../LenovoQMDownload/SoftMgr/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../LenovoQMDownload/SoftMgr/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../LenovoQMDownload/SoftMgr/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./WaterfallsFlow.vue?vue&type=script&lang=js&\"","<template>\n    <view class=\"wf-page\">\n        <!--    left    -->\n        <view>\n            <view id=\"left\" v-if=\"leftList.length\">\n                <view v-for=\"(item,index) in leftList\" :key=\"index\"\n                      class=\"wf-item\" @tap=\"itemTap(item)\">\n                    <WaterfallsFlowItem :item=\"item\"/>\n                </view>\n            </view>\n        </view>\n\n\n        <!--    right    -->\n        <view>\n            <view id=\"right\" v-if=\"rightList.length\">\n                <view v-for=\"(item,index) in rightList\" :key=\"index\"\n                      class=\"wf-item\" @tap=\"itemTap(item)\">\n                    <WaterfallsFlowItem :item=\"item\"/>\n                </view>\n            </view>\n        </view>\n    </view>\n</template>\n\n<script>\nimport WaterfallsFlowItem from '../WaterfallsFlowItem/WaterfallsFlowItem.vue'\n\nexport default {\n    components: {\n        WaterfallsFlowItem\n    },\n    props: {\n        // 瀑布流列表\n        wfList: {\n            type: Array,\n            require: true\n        },\n        updateNum: {\n            type: Number,\n            default: 10\n        }\n    },\n    data() {\n        return {\n            allList: [],       // 全部列表\n            leftList: [],      // 左边列表\n            rightList: [],     // 右边列表\n            mark: 0,           // 列表标记\n            boxHeight: [],     // 下标0和1分别为左列和右列高度\n        };\n    },\n    watch: {\n        // 监听列表数据变化\n        wfList() {\n            // 如果数据为空或新的列表数据少于旧的列表数据（通常为下拉刷新或切换排序或使用筛选器），初始化变量\n            if (!this.wfList.length ||\n                (this.wfList.length === this.updateNum && this.wfList.length <= this.allList.length)) {\n                this.allList = [];\n                this.leftList = [];\n                this.rightList = [];\n                this.boxHeight = [];\n                this.mark = 0;\n            }\n\n            // 如果列表有值，调用waterfall方法\n            if (this.wfList.length) {\n                this.allList = this.wfList;\n                this.waterFall()\n            }\n        },\n\n        // 监听标记，当标记发生变化，则执行下一个item排序\n        mark() {\n            const len = this.allList.length;\n            if (this.mark < len && this.mark !== 0) {\n                this.waterFall();\n            }\n        }\n    },\n    methods: {\n        // 瀑布流排序\n        waterFall() {\n            const i = this.mark;\n            if (i === 0) {\n                // 初始化，从左边开始插入\n                this.leftList.push(this.allList[i]);\n                // 更新左边列表高度\n                this.getViewHeight(0);\n            } else if (i === 1) {\n                // 第二个item插入，默认为右边插入\n                this.rightList.push(this.allList[i]);\n                // 更新右边列表高度\n                this.getViewHeight(1);\n            } else {\n                // 根据左右列表高度判断下一个item应该插入哪边\n                const leftOrRight = this.boxHeight[0] > this.boxHeight[1] ? 1 : 0;\n                if (leftOrRight) {\n                    this.rightList.push(this.allList[i])\n                } else {\n                    this.leftList.push(this.allList[i])\n                }\n                // 更新插入列表高度\n                this.getViewHeight(leftOrRight);\n            }\n        },\n        // 获取列表高度\n        getViewHeight(leftOrRight) {\n            const query = uni.createSelectorQuery().in(this);\n            const id = leftOrRight ? '#right' : '#left';\n            // 使用nextTick，确保页面更新结束后，再请求高度\n            this.$nextTick(() => {\n                query.select(id).boundingClientRect(res => {\n                    res ? this.boxHeight[leftOrRight] = res.height : '';\n                    this.mark = this.mark + 1;\n                }).exec();\n            })\n        },\n\n        // item点击\n        itemTap(item) {\n            this.$emit('itemTap', item)\n        }\n    }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n$page-padding: 10px;\n$grid-gap: 10px;\n\n.wf-page {\n    display: grid;\n    grid-template-columns: 1fr 1fr;\n    grid-gap: $grid-gap;\n    padding: 10px $page-padding;\n}\n\n.wf-item {\n    width: calc((100vw - 2 * #{$page-padding} - #{$grid-gap}) / 2);\n    padding-bottom: $grid-gap;\n}\n</style>\n","import mod from \"-!../../../../../../LenovoQMDownload/SoftMgr/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../LenovoQMDownload/SoftMgr/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../LenovoQMDownload/SoftMgr/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../LenovoQMDownload/SoftMgr/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../LenovoQMDownload/SoftMgr/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../LenovoQMDownload/SoftMgr/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../LenovoQMDownload/SoftMgr/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../LenovoQMDownload/SoftMgr/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../LenovoQMDownload/SoftMgr/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./WaterfallsFlow.vue?vue&type=style&index=0&id=26d87764&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../../LenovoQMDownload/SoftMgr/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../LenovoQMDownload/SoftMgr/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../LenovoQMDownload/SoftMgr/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../LenovoQMDownload/SoftMgr/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../LenovoQMDownload/SoftMgr/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../LenovoQMDownload/SoftMgr/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../LenovoQMDownload/SoftMgr/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../LenovoQMDownload/SoftMgr/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../LenovoQMDownload/SoftMgr/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./WaterfallsFlow.vue?vue&type=style&index=0&id=26d87764&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1670401982036\n      var cssReload = require(\"D:/LenovoQMDownload/SoftMgr/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}